# Алгоритм преобразования инфиксной записи выражения и вычисление значения выражения на стеке

## Виды записей выражений 
Наиболее привычной формой записи выражения является инфиксная запись вида "операнд - оператор - операнд". То есть фактическое 
f(x,y) превращается в xfy. Префикная и постфиксная определяется паттерном "оператор - операнд - операнд" и "операнд - операнд - оператор", соответственно.
Суть названий, с одной стороны отражена в положении оператора в самом выражении, с другой, напрямую зависит от порядка обхода синтаксического дерева - это дерево, в котором каждый терминальный узел является операндом, а нетерминальный - оператором.

*тут должна была быть картинка, но мы праздновали сдачу лабы 5*

## Преобразование выражения. Алгоритм
Словестное описание алгоритма преобразования в обратную польскую запись выглядит как-то так:
Пока есть ещё символы для чтения:
  Читаем очередной символ.
    Если символ является числом или постфиксной функцией (например, ! — факториал), добавляем его к выходной строке.
    Если символ является префиксной функцией (например, sin — синус), помещаем его в стек.
    Если символ является открывающей скобкой, помещаем его в стек.
    Если символ является закрывающей скобкой:
  До тех пор, пока верхним элементом стека не станет открывающая скобка, выталкиваем элементы из стека в выходную строку. При этом открывающая скобка удаляется из стека, но в выходную строку не добавляется. Если стек закончился раньше, чем мы встретили открывающую скобку, это означает, что в выражении либо неверно поставлен разделитель, либо не согласованы скобки.
  Если существуют разные виды скобок, появление непарной скобки также свидетельствует об ошибке. Если какие-то скобки одновременно являются функциями (например, [x] — целая часть), добавляем к выходной строке символ этой функции.
Если символ является бинарной операцией о1, тогда:
пока на вершине стека префиксная функция…
… ИЛИ операция на вершине стека приоритетнее или такого же уровня приоритета как o1
… ИЛИ операция на вершине стека левоассоциативная с приоритетом как у o1
… выталкиваем верхний элемент стека в выходную строку;
помещаем операцию o1 в стек.
Когда входная строка закончилась, выталкиваем все символы из стека в выходную строку. В стеке должны были остаться только символы операций; если это не так, значит в выражении не согласованы скобки. 

*Тут должен был быть код, но мы отмечали пятерку по мемотехнике*

## Вычисление значения выражения

Для подсчёта итогового значения необходимо вытаскивать со стека токены. Если токен является операндом, то перекидываем его во второй стек. Если получили на вход оператор, то достаем со второго стека два операнда, производим фактическое вычисление и кладём результат на первый стек. Так до тех пор, пока на стеке не останется последнее значение - результат исходного выражения.
