# Нормализованное представление вещественных чисел, мантисса и порядок. Двоичное представление значений вещественных типов, особенности вещественной арифметики.

Возможно текст ниже будет немного нудным, но от этого никуда не деться. Немного терпения, мой друг :) 

:sparkling_heart:

**Вещественные числа** обычно представляются в виде чисел с плавающей запятой. Числа с плавающей запятой — один из возможных способов представления действительных чисел, который является компромиссом между точностью и диапазоном принимаемых значений. 

Число с плавающей запятой состоит из набора отдельных двоичных разрядов, условно разделенных на так называемые знак, порядок и мантиссу. В наиболее распространённом формате (стандарт IEEE 754) число с плавающей запятой представляется в виде набора битов, часть из которых кодирует собой мантиссу числа, другая часть — показатель степени, и ещё один бит используется для указания знака числа (0 — если число положительное, 1 — если число отрицательное).

![image](https://user-images.githubusercontent.com/101891316/163397930-b4f7f71b-2eb8-47d7-924e-083ab1f60ea8.png)

Знак — один бит, указывающий знак всего числа с плавающей точкой. Порядок и мантисса — целые числа, которые вместе со знаком дают представление числа с плавающей запятой в следующем виде:

![image](https://user-images.githubusercontent.com/101891316/163397641-4b3a9138-d4e4-4a8e-8ad7-47e8fe608454.png)

При этом лишь некоторые из вещественных чисел могут быть представлены в памяти компьютера точным значением, в то время как остальные числа представляются *приближёнными значениями*.

:star2: **Нормализованная форма числа с плавающей запятой** :star2:
- такая форма, в которой мантисса десятичного числа принимает значения от 1 (включительно) до 10 (не включительно), а мантисса двоичного числа принимает значения от 1 (включительно) до 2 (не включительно). То есть в мантиссе слева от запятой до применения порядка находится ровно один знак. В такой форме любое число (кроме 0) записывается единственным образом. 
- *Ноль* же представить таким образом невозможно, поэтому стандарт предусматривает специальную последовательность битов для задания числа 0 (а заодно и некоторых других полезных чисел, таких как −∞ и +∞). Так как старший двоичный разряд (целая часть) мантиссы вещественного числа в нормализованном виде всегда равен «1», то его можно не записывать, сэкономив таким образом один бит, что и используется в стандарте IEEE 754. В позиционных системах счисления с основанием большим, чем 2 (в троичной, четверичной и др.), этого замечательного свойства нет (ведь целая часть там может быть не только единицей).

:star2: **Денормализованные числа** :star2:

Денормализованные числа - это способ увеличить количество представимых числом с плавающей запятой значений около нуля, дабы повысить точность вычислений. Каждое значение денормализованного числа меньше самого маленького нормализованного ("обычного") значения числа с плавающей запятой. Согласно стандарту, если порядок равен своему минимальному значению (все его биты — нули, а истинное значение порядка равно его сдвигу) и все биты мантиссы равны нулю, то это ±0. Если же мантисса не равна нулю, то это число с порядком, на единицу большим минимального (все биты порядка, кроме младшего — нули) и данной мантиссой, целая часть которой считается равной нулю, а не единице.

![image](https://user-images.githubusercontent.com/101891316/163407788-98db775b-f930-40fb-8608-32d97a0f6448.png)

## Особые значения чисел с плавающей точкой

:boom: **Ноль (со знаком)** :boom:

Как уже было оговорено выше, в нормализованной форме числа с плавающей точкой невозможно представить ноль. Поэтому для его представления зарезервированы специальные значения мантиссы и порядка — число считается нулём, если все его биты, кроме знакового, равны нулю. При этом в зависимости от значения бита знака ноль может быть как положительным, так и отрицательным.

![image](https://user-images.githubusercontent.com/101891316/163408345-d753f925-fcf2-4a8a-9193-78bdb8bc47eb.png)

:boom: **Неопределенность (NaN)** :boom:

NaN — это аббревиатура от фразы "not a number". NaN является результатом арифметических операций, если во время их выполнения произошла ошибка. В IEEE 754 NaN представлен как число, в котором все двоичные разряды порядка — единицы, а мантисса не нулевая.

![image](https://user-images.githubusercontent.com/101891316/163408865-98604078-226d-4b2b-bf25-535edb51ba3b.png)

По определению NaN ≠ NaN, поэтому, для проверки значения переменной нужно просто сравнить ее с собой.

:boom: **Бесконечности** :boom:

В число с плавающей запятой можно записать значение +∞ или −∞. Как и нули со знаком, бесконечности позволяют получить хотя бы близкий к правильному результат вычисления в случае переполнения. Согласно стандарту IEEE 754 число с плавающей запятой считается равным бесконечности, если все двоичные разряды его порядка — единицы, а мантисса равна нулю. Знак бесконечности определяется знаковым битом числа.

![image](https://user-images.githubusercontent.com/101891316/163409251-6ab148ee-caae-483c-bb89-9ddbf4e66d71.png)

## Действия с числами с плавающей запятой

**Умножение и деление** :cop:

Самыми простыми для восприятия арифметическими операциями над числами с плавающей запятой являются умножение и деление. Для того, чтобы умножить два вещественных числа в нормализованной форме необходимо перемножить их мантиссы, сложить порядки, округлить и нормализовать полученное число.

Соответственно, чтобы произвести деление нужно разделить мантиссу делимого на мантиссу делителя и вычесть из порядка делимого порядок делителя. Затем точно так же округлить мантиссу результата и привести его к нормализованной форме.

**Сложение и вычитание** :cop:

Идея метода сложения и вычитания чисел с плавающей точкой заключается в приведении их к одному порядку. Сначала выбирается оптимальный порядок, затем мантиссы обоих чисел представляются в соответствии с новым порядком, затем над ними производится сложение/вычитание, мантисса результата округляется и, если нужно, результат приводится к нормализированной форме.

------------------------------------------------------------------------------------------------------------------------

*Пример представления вещественного числа в памяти ЭВМ*

![image](https://user-images.githubusercontent.com/101891316/163410614-0274cc64-6f8b-4be3-89d2-9e40ab40bcd6.png)

Вам тут вирусов заслали, чините компуктер :point_down:

![image](https://user-images.githubusercontent.com/101891316/163410948-33593162-bdb4-46c2-be2c-3f71d68cd6b8.png)

